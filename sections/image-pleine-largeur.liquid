<style>
  .image-full-width {
    padding-top: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    padding-left: 20px;
  }
  .image-desktop-container {
    position: relative;
    display: inline-block;
    width: 100%;
  }
  .image-full-width-desktop {
    border-radius: 15px;
    width: 100%;
    height: auto;
    display: block;
  }
  @media screen and (max-width: 479px) {
    .image-full-width-desktop {
      border-radius: 9px;
      display: none;
    }
    .image-desktop-container {
      display: none;
    }
  }
  .choix-image-mobile {
    display: none;
    position: relative;
  }
  @media screen and (max-width: 479px) {
    .choix-image-mobile {
      display: block;
    }
  }
  .image-full-width-mobile {
    width: 100%;
    height: auto;
    border-radius: 9px;
    display: block;
  }
  .paragraph-text {
    font-family: Karla;
    font-size: 1.2rem;
    line-height: 1.5;
    text-align: center;
    font-weight: 500;
  }
  .paragraph-desktop {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 80%;
    z-index: 10;
  }
  .paragraph-mobile {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 90%;
    z-index: 10;
  }
  @media screen and (max-width: 767px) {
    .paragraph-text {
      font-size: 1rem;
    }
  }
  .text-color-brown {
    color: #6e612b;
  }
  .text-color-white {
    color: #ffffff;
  }
</style>

<div li-content-for-blocks="">
{% for block in section.blocks %}
  {% case block.type %}
    {% when '@app' %}
      {% render block %}
    {% when 'image-desktop' %}
      <div class="image-desktop-container" li-block="image-desktop">
        {% if block.settings.image_image %}
          {{ block.settings.image_image | image_url: width: 1200 | image_tag: class: 'image-full-width-desktop', alt: 'inherit', loading: 'lazy' }}
        {% else %}
          <img class="image-full-width-desktop" alt="inherit" src="https://cdn.prod.website-files.com/689370215f6dcea901024517/68946aa1adf18a56010a9059_Header%20image.jpg" loading="lazy">
        {% endif %}
        {% if block.settings.paragraph_text != blank %}
          {% assign text_color_class = 'text-color-brown' %}
          {% if block.settings.text_color == 'white' %}
            {% assign text_color_class = 'text-color-white' %}
          {% endif %}
          <div class="paragraph-desktop">
            <p class="paragraph-text {{ text_color_class }}">
              {{ block.settings.paragraph_text }}
            </p>
          </div>
        {% endif %}
      </div>
    {% when 'image-mobile' %}
      <div class="choix-image-mobile" li-block="image-mobile">
        {% if block.settings.image_image %}
          {{ block.settings.image_image | image_url: width: 800 | image_tag: class: 'image-full-width-mobile', alt: 'inherit', loading: 'lazy' }}
        {% else %}
          <img class="image-full-width-mobile" alt="inherit" src="https://cdn.prod.website-files.com/689370215f6dcea901024517/68947d5d1b9d583b83bf82ad_Mobile_HP_image.jpg" loading="lazy">
        {% endif %}
        {% if block.settings.paragraph_text != blank %}
          {% assign text_color_class = 'text-color-brown' %}
          {% if block.settings.text_color == 'white' %}
            {% assign text_color_class = 'text-color-white' %}
          {% endif %}
          <div class="paragraph-mobile">
            <p class="paragraph-text {{ text_color_class }}">
              {{ block.settings.paragraph_text }}
            </p>
          </div>
        {% endif %}
      </div>
    {% when 'paragraph' %}
      <!-- Le texte est maintenant intégré directement dans les blocs image-desktop et image-mobile -->
  {% endcase %}
{% endfor %}
</div>

{% schema %}
{
  "tag": "section",
  "name": "image-pleine-largeur",
  "class": "image-full-width",
  "blocks": [
    {
      "name": "image-desktop",
      "type": "image-desktop",
      "settings": [
        {
          "id": "image_image",
          "type": "image_picker",
          "label": "Image"
        },
        {
          "id": "paragraph_text",
          "type": "textarea",
          "label": "Texte sur l'image"
        },
        {
          "id": "text_color",
          "type": "select",
          "label": "Couleur du texte",
          "options": [
            {
              "value": "brown",
              "label": "Marron (#6e612b)"
            },
            {
              "value": "white",
              "label": "Blanc (#ffffff)"
            }
          ],
          "default": "brown"
        }
      ]
    },
    {
      "name": "image-mobile",
      "type": "image-mobile",
      "settings": [
        {
          "id": "image_image",
          "type": "image_picker",
          "label": "Image"
        },
        {
          "id": "paragraph_text",
          "type": "textarea",
          "label": "Texte sur l'image"
        },
        {
          "id": "text_color",
          "type": "select",
          "label": "Couleur du texte",
          "options": [
            {
              "value": "brown",
              "label": "Marron (#6e612b)"
            },
            {
              "value": "white",
              "label": "Blanc (#ffffff)"
            }
          ],
          "default": "brown"
        }
      ]
    },
    {
      "name": "paragraph",
      "type": "paragraph",
      "settings": [
        {
          "id": "paragraph_text",
          "type": "textarea",
          "label": "Texte du paragraphe",
          "default": "Votre texte ici..."
        },
        {
          "id": "text_color",
          "type": "select",
          "label": "Couleur du texte",
          "options": [
            {
              "value": "brown",
              "label": "Marron (#6e612b)"
            },
            {
              "value": "white",
              "label": "Blanc (#ffffff)"
            }
          ],
          "default": "brown"
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "image-pleine-largeur",
      "category": "Liquify",
      "blocks": [
        {
          "type": "image-desktop"
        },
        {
          "type": "image-mobile"
        }
      ]
    }
  ]
}
{% endschema %}
