<style>
  /* STYLES SCOPED - N'AFFECTENT QUE CETTE SECTION */
  .bloc-de-texte-section {
    margin: 0;
    padding: 0;
  }

  .bloc-de-texte-section .bloc-de-texte-wrapper {
    margin: 0 auto;
    padding: 20px;
    max-width: 100%;
    text-align: center;
  }

  /* Styles mobile - suppression complète des espaces en bas + 10px à gauche/droite */
  @media (max-width: 768px) {
    .bloc-de-texte-section {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }
    
    .bloc-de-texte-section .bloc-de-texte-wrapper {
      padding: 0 10px 0 10px !important;
      margin: 0 !important;
      text-align: center;
    }
  }

  /* Reset des marges des blocs - SCOPED À CETTE SECTION */
  .bloc-de-texte-section .bloc-titre-h2,
  .bloc-de-texte-section .bloc-gros-texte,
  .bloc-de-texte-section .bloc-paragraph,
  .bloc-de-texte-section .bloc-bouton-hp {
    margin: 0 0 15px 0;
  }

  .bloc-de-texte-section .bloc-titre-h2:last-child,
  .bloc-de-texte-section .bloc-gros-texte:last-child,
  .bloc-de-texte-section .bloc-paragraph:last-child,
  .bloc-de-texte-section .bloc-bouton-hp:last-child {
    margin-bottom: 0;
  }

  /* Styles des titres - SCOPED À CETTE SECTION */
  .bloc-de-texte-section .heading-style-h1 {
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
    margin: 0;
    text-align: center;
  }

  .bloc-de-texte-section .heading-style-h2 {
    font-size: 2rem;
    font-weight: 600;
    line-height: 1.3;
    margin: 0;
    text-align: center;
  }

  /* Style paragraphe - SCOPED À CETTE SECTION */
  .bloc-de-texte-section .paragraph {
    font-size: 1rem;
    line-height: 1.6;
    margin: 0;
    text-align: center;
  }

  /* Styles bouton - SCOPED À CETTE SECTION */
  .bloc-de-texte-section .button-2 {
    display: inline-block;
    padding: 12px 24px;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 500;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .bloc-de-texte-section .bloc-bouton-hp {
    text-align: center;
    width: 100%;
    display: block;
  }

  /* Responsive typography - SCOPED À CETTE SECTION */
  @media (max-width: 768px) {
    .bloc-de-texte-section .heading-style-h1 {
      font-size: 2rem;
    }
    
    .bloc-de-texte-section .heading-style-h2 {
      font-size: 1.5rem;
    }
    
    .bloc-de-texte-section .paragraph {
      font-size: 0.9rem;
    }
    
    .bloc-de-texte-section .button-2 {
      padding: 10px 20px;
      font-size: 0.9rem;
    }
  }
</style>

<section class="bloc-de-texte-section">
  <div class="bloc-de-texte-wrapper">
    {% for block in section.blocks %}
      {% case block.type %}

        {% when '@app' %}
          {% render block %}

        {% when 'sous-titre' %}
          <div class="bloc-titre-h2" {{ block.shopify_attributes }}>
            <h2 class="heading-style-h2">
              {{ block.settings.text_heading }}
            </h2>
          </div>

        {% when 'grand-texte' %}
          <div class="bloc-gros-texte" {{ block.shopify_attributes }}>
            <h1 class="heading-style-h1">
              {{ block.settings.text_heading }}
            </h1>
          </div>

        {% when 'paragraphe' %}
          <div class="bloc-paragraph" {{ block.shopify_attributes }}>
            <p class="paragraph">
              {{ block.settings.text_paragraph }}
            </p>
          </div>

        {% when 'bouton' %}
          {% assign bg_color       = block.settings.bg_color       | default: '#ec8451' %}
          {% assign text_color     = block.settings.text_color     | default: '#f5f2d9' %}
          {% assign outline_color  = block.settings.outline_color  | default: '#ec8451' %}
          {% assign button_type    = block.settings.button_type    | default: 'filled' %}

          {% if button_type == 'filled' %}
            {% assign button_style = 'background-color:' | append: bg_color | append: ';color:' | append: text_color | append: ';border:none;' %}
          {% else %}
            {% assign button_style = 'background-color:transparent;color:' | append: text_color | append: ';border:1px solid ' | append: outline_color | append: ';' %}
          {% endif %}

          <div class="bloc-bouton-hp" {{ block.shopify_attributes }}>
            <a
              href="{{ block.settings.url_link }}"
              class="button-2"
              style="{{ button_style }}"
            >
              {{ block.settings.text_text }}
            </a>
          </div>

      {% endcase %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "tag": "section",
  "name": "Bloc de texte",
  "class": "bloc-text-hp",
  "blocks": [
    {
      "name": "Sous-titre",
      "type": "sous-titre",
      "settings": [
        {
          "id": "text_heading",
          "type": "text",
          "label": "Titre",
          "default": "Sous-titre"
        }
      ]
    },
    {
      "name": "Grand texte",
      "type": "grand-texte",
      "settings": [
        {
          "id": "text_heading",
          "type": "text",
          "label": "Titre principal",
          "default": "Titre principal"
        }
      ]
    },
    {
      "name": "Paragraphe",
      "type": "paragraphe",
      "settings": [
        {
          "id": "text_paragraph",
          "type": "textarea",
          "label": "Texte",
          "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique."
        }
      ]
    },
    {
      "name": "Bouton",
      "type": "bouton",
      "settings": [
        {
          "id": "text_text",
          "type": "text",
          "label": "Texte du bouton",
          "default": "Cliquez ici"
        },
        {
          "id": "url_link",
          "type": "url",
          "label": "Lien"
        },
        {
          "id": "button_type",
          "type": "select",
          "label": "Type de bouton",
          "default": "filled",
          "options": [
            { "value": "filled", "label": "Fond plein" },
            { "value": "outline", "label": "Contour" }
          ]
        },
        {
          "id": "bg_color",
          "type": "select",
          "label": "Couleur de fond",
          "default": "#ec8451",
          "options": [
            { "value": "#ec8451", "label": "Orange" },
            { "value": "#f5f2d9", "label": "Crème" },
            { "value": "#6e612b", "label": "Vert olive" },
            { "value": "#bdbf85", "label": "Vert clair" },
            { "value": "#a6d4f2", "label": "Bleu clair" }
          ]
        },
        {
          "id": "text_color",
          "type": "select",
          "label": "Couleur du texte",
          "default": "#f5f2d9",
          "options": [
            { "value": "#ec8451", "label": "Orange" },
            { "value": "#f5f2d9", "label": "Crème" },
            { "value": "#6e612b", "label": "Vert olive" },
            { "value": "#bdbf85", "label": "Vert clair" },
            { "value": "#a6d4f2", "label": "Bleu clair" }
          ]
        },
        {
          "id": "outline_color",
          "type": "select",
          "label": "Couleur du contour",
          "default": "#ec8451",
          "options": [
            { "value": "#ec8451", "label": "Orange" },
            { "value": "#f5f2d9", "label": "Crème" },
            { "value": "#6e612b", "label": "Vert olive" },
            { "value": "#bdbf85", "label": "Vert clair" },
            { "value": "#a6d4f2", "label": "Bleu clair" }
          ]
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "presets": [
    {
      "name": "Bloc de texte",
      "category": "Contenu",
      "blocks": [
        { "type": "sous-titre" },
        { "type": "grand-texte" },
        { "type": "paragraphe" },
        { "type": "bouton" }
      ]
    }
  ]
}
{% endschema %}
